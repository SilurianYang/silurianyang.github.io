(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{225:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"页面返回事件-v-1-4-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#页面返回事件-v-1-4-8"}},[s._v("#")]),s._v(" 页面返回事件 "),a("badge",[s._v("V 1.4.8+")])],1),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("在有带原生返回按钮的页面中使用 "),a("code",[s._v("onBackPress")]),s._v(" 应更改为 "),a("code",[s._v("onBeforeBack")]),s._v("。相反则可以继续使用 "),a("code",[s._v("onBackPress")])])]),s._v(" "),a("h2",{attrs:{id:"使用-onbeforeback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-onbeforeback"}},[s._v("#")]),s._v(" 使用 onBeforeBack")]),s._v(" "),a("p",[s._v("路由插件通过动态更改 "),a("code",[s._v("onBackPress")]),s._v(" 生命钩子做到路由返回页面拦截的。早期版本是没有这样一个生命钩子的，所有的处理逻辑都放在全局路由守卫下。后来应广大 "),a("code",[s._v("大佬")]),s._v(" 的要求，说这样有点麻烦，拿不到当前页面的数据 "),a("strong",[s._v("(其实很好拿，不是吗？)")]),s._v("。OK！！ 那咋们就给多加一个生命钩子嘛，莫问题的啦！"),a("strong",[s._v("注意：在有带原生返回按钮的页面 "),a("code",[s._v("onBackPress")]),s._v(" 钩子会被重置为 "),a("code",[s._v("onBeforeBack")]),s._v("，所以你写 "),a("code",[s._v("onBackPress")]),s._v(" 钩子是无效的。用或者更好！ 为啥呢？看操作...")])]),s._v(" "),a("h4",{attrs:{id:"router5-vue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#router5-vue"}},[s._v("#")]),s._v(" router5.vue")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("onBeforeBack")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//or")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//阻止页面关闭")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h4",{attrs:{id:"好处如下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#好处如下"}},[s._v("#")]),s._v(" 好处如下:")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("可返回 "),a("code",[s._v("Promise")]),s._v("，告诉路由插件需要异步处理这个钩子、"),a("code",[s._v("resolve(true)")]),s._v(" 可以阻止关闭页面。")])]),s._v(" "),a("li",[a("p",[s._v("你还可以同步返回 "),a("code",[s._v("true/false/undefined")]),s._v("  返回 "),a("code",[s._v("true")]),s._v(" 则阻止关闭。")])]),s._v(" "),a("li",[a("p",[s._v("按流程执行，先执行完 "),a("code",[s._v("onBeforeBack")]),s._v(" 钩子、顺利通行 则执行离开守卫、全局守卫、后置守卫、最后结束。")])])]),s._v(" "),a("h2",{attrs:{id:"原始的-onbackpress"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原始的-onbackpress"}},[s._v("#")]),s._v(" 原始的 onBackPress")]),s._v(" "),a("p",[a("strong",[s._v("在没有带原生返回按钮的页面中依旧使用 "),a("code",[s._v("onBackPress")])]),s._v("！路由插件不会在这些页面注入 "),a("code",[s._v("onBeforeBack")]),s._v(" 钩子函数。")]),s._v(" "),a("h4",{attrs:{id:"兼容其他端写法："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#兼容其他端写法："}},[s._v("#")]),s._v(" 兼容其他端写法：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("使用js封装返回的方法，在 "),a("code",[s._v("onBackPress及onBeforeBack")]),s._v("都调用此方法。放心两者不会同时执行！")])]),s._v(" "),a("li",[a("p",[s._v("原型挂载方法，最后还是在 "),a("code",[s._v("onBackPress及onBeforeBack")]),s._v(" 中调用此方法。")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);