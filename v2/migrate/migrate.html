<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从 Router 1.x 迁移 | uni-simple-router</title>
    <meta name="description" content="
uni-app工具库 uni-app-request ajax uni-ajax 请求 请求拦截 ajaxFile uni-app下载文件 uni-ajaxFile 下载拦截
startUpFiles 上传文件 批量上传 上传拦截 uni-app上传文件
upnNetRes 上传网络文件 uni-app上传网络文件
selectFiles uni-app选择文件  本地选择文件 选择并上传
AppSelectFiles  app端选择文件 uni-app
otherSelectFiles  	非5+App选择图片
startDownFiles  下载文件 uni-app批量下载文件
uni-app-chat socket.js uni-app-socket.js uni-app-webSocket.js uni-app webSocket通讯库 一键管理 自定义socket事件
uni-app-customImg dataURLtoBlob uni-app自定义图片 图片转base64 网络图片转base64 微信小程序图片转base64 base64转图片
h5_URLtoBlob platformChunk h5_appendFile app_URLtoBitmap app_appendFile applet_URLtoPath applet_appendFile custom-picture.js
uni-app-customEvent uni-app自定义事件 全局事件 custom-event.js
uni-app-upgrade uni-APP热更，整包一体 一键升级 mui、5+ App升级程序
uni-simple-router uni-app-router vue-router 小程序 H5 APP通用的vue-router
">
    <script>
          var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?dd407a6f6294639a47d73a050887a82b";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  <script src="/jquery.min.js"></script>
  <script src="/layui/layui.all.js"></script>
    
    <link rel="preload" href="/assets/css/0.styles.e57639ef.css" as="style"><link rel="preload" href="/assets/js/app.623857a3.js" as="script"><link rel="preload" href="/assets/js/3.7d6da02e.js" as="script"><link rel="preload" href="/assets/js/2.867d3b73.js" as="script"><link rel="preload" href="/assets/js/48.2f7a751f.js" as="script"><link rel="preload" href="/assets/js/4.034d248d.js" as="script"><link rel="prefetch" href="/assets/js/10.d8e715c5.js"><link rel="prefetch" href="/assets/js/11.4e5f9b6b.js"><link rel="prefetch" href="/assets/js/12.0ece49a3.js"><link rel="prefetch" href="/assets/js/13.80d1eada.js"><link rel="prefetch" href="/assets/js/14.48e84ef6.js"><link rel="prefetch" href="/assets/js/15.781b5546.js"><link rel="prefetch" href="/assets/js/16.9bc05f1c.js"><link rel="prefetch" href="/assets/js/17.c987978c.js"><link rel="prefetch" href="/assets/js/18.a8ce82a0.js"><link rel="prefetch" href="/assets/js/19.946d950a.js"><link rel="prefetch" href="/assets/js/20.d0d4f4dc.js"><link rel="prefetch" href="/assets/js/21.52902039.js"><link rel="prefetch" href="/assets/js/22.b09dd9f0.js"><link rel="prefetch" href="/assets/js/23.752ff646.js"><link rel="prefetch" href="/assets/js/24.53628c86.js"><link rel="prefetch" href="/assets/js/25.bdb8c568.js"><link rel="prefetch" href="/assets/js/26.09dcc47c.js"><link rel="prefetch" href="/assets/js/27.f068c5c1.js"><link rel="prefetch" href="/assets/js/28.27596a92.js"><link rel="prefetch" href="/assets/js/29.2a05ce27.js"><link rel="prefetch" href="/assets/js/30.3e61b565.js"><link rel="prefetch" href="/assets/js/31.b9358f7e.js"><link rel="prefetch" href="/assets/js/32.86d7a058.js"><link rel="prefetch" href="/assets/js/33.02803cff.js"><link rel="prefetch" href="/assets/js/34.f1a49a33.js"><link rel="prefetch" href="/assets/js/35.e72a0f6b.js"><link rel="prefetch" href="/assets/js/36.3190bed2.js"><link rel="prefetch" href="/assets/js/37.d69cffe4.js"><link rel="prefetch" href="/assets/js/38.3d1c1f75.js"><link rel="prefetch" href="/assets/js/39.57d936be.js"><link rel="prefetch" href="/assets/js/40.762bd5b7.js"><link rel="prefetch" href="/assets/js/41.1d2dec89.js"><link rel="prefetch" href="/assets/js/42.aab9df42.js"><link rel="prefetch" href="/assets/js/43.1aa1ce89.js"><link rel="prefetch" href="/assets/js/44.f1dc5df9.js"><link rel="prefetch" href="/assets/js/45.19ded167.js"><link rel="prefetch" href="/assets/js/46.a5e09b79.js"><link rel="prefetch" href="/assets/js/47.60e65e4d.js"><link rel="prefetch" href="/assets/js/49.a014e215.js"><link rel="prefetch" href="/assets/js/5.fd35248b.js"><link rel="prefetch" href="/assets/js/50.d67c8375.js"><link rel="prefetch" href="/assets/js/51.2f520c94.js"><link rel="prefetch" href="/assets/js/52.17f36ecc.js"><link rel="prefetch" href="/assets/js/53.0812a83d.js"><link rel="prefetch" href="/assets/js/54.1279d8b1.js"><link rel="prefetch" href="/assets/js/55.9f73afea.js"><link rel="prefetch" href="/assets/js/56.5dbc8608.js"><link rel="prefetch" href="/assets/js/57.a21086e4.js"><link rel="prefetch" href="/assets/js/58.c11a413c.js"><link rel="prefetch" href="/assets/js/59.75619af0.js"><link rel="prefetch" href="/assets/js/6.2f48159f.js"><link rel="prefetch" href="/assets/js/60.62e7cd03.js"><link rel="prefetch" href="/assets/js/61.0fca4533.js"><link rel="prefetch" href="/assets/js/62.23e2cb8b.js"><link rel="prefetch" href="/assets/js/63.5eb78f9d.js"><link rel="prefetch" href="/assets/js/64.d76d0851.js"><link rel="prefetch" href="/assets/js/65.a278bc17.js"><link rel="prefetch" href="/assets/js/66.764c8718.js"><link rel="prefetch" href="/assets/js/67.0534db99.js"><link rel="prefetch" href="/assets/js/68.5a1fd2b4.js"><link rel="prefetch" href="/assets/js/69.27997308.js"><link rel="prefetch" href="/assets/js/7.6caed892.js"><link rel="prefetch" href="/assets/js/70.9bb84486.js"><link rel="prefetch" href="/assets/js/71.efca15fc.js"><link rel="prefetch" href="/assets/js/72.110f0e21.js"><link rel="prefetch" href="/assets/js/73.130e910c.js"><link rel="prefetch" href="/assets/js/8.dfa4cb62.js"><link rel="prefetch" href="/assets/js/9.0b2059ca.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e57639ef.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div id="msgLayer" data-v-3d601962><div class="msgLayer" data-v-3d601962><div class="update" data-v-3d601962><img src="/images/update.png" alt="update" data-v-3d601962></div> <div data-v-3d601962><a href="/v2/migrate/migrate" data-v-3d601962>迁移文档 </a>
            小爱为你推荐使用新版本哦~~
        </div></div></div> <header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2/" class="home-link router-link-active"><!----> <span class="site-name">uni-simple-router</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2/start/quickstart.html" class="nav-link">指南</a></div><div class="nav-item"><a href="/v2/api/routerInsatll.html" class="nav-link">API 参考</a></div><div class="nav-item"><a href="/v2/tutorial/rgRoutes.html" class="nav-link">相关教程</a></div><div class="nav-item"><a href="/v2/migrate/migrate.html" class="nav-link router-link-exact-active router-link-active">迁移版本</a></div><div class="nav-item"><a href="/src/router/start/donate/donate.html" class="nav-link">捐赠者名单</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="相关文档" class="dropdown-title"><span class="title">相关文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://uniapp.dcloud.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  uni-app 文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-router 文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.hhyang.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  uni-app-tools 文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/SilurianYang/uni-simple-router/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  更新记录
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/SilurianYang/uni-simple-router" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">en-US</a></li><li class="dropdown-item"><!----> <a href="/v2/migrate/migrate.html" class="nav-link router-link-exact-active router-link-active">zh-CN</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2/start/quickstart.html" class="nav-link">指南</a></div><div class="nav-item"><a href="/v2/api/routerInsatll.html" class="nav-link">API 参考</a></div><div class="nav-item"><a href="/v2/tutorial/rgRoutes.html" class="nav-link">相关教程</a></div><div class="nav-item"><a href="/v2/migrate/migrate.html" class="nav-link router-link-exact-active router-link-active">迁移版本</a></div><div class="nav-item"><a href="/src/router/start/donate/donate.html" class="nav-link">捐赠者名单</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="相关文档" class="dropdown-title"><span class="title">相关文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://uniapp.dcloud.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  uni-app 文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-router 文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.hhyang.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  uni-app-tools 文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/SilurianYang/uni-simple-router/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  更新记录
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/SilurianYang/uni-simple-router" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">en-US</a></li><li class="dropdown-item"><!----> <a href="/v2/migrate/migrate.html" class="nav-link router-link-exact-active router-link-active">zh-CN</a></li></ul></div></div> <!----></nav>  <div class="sidebar" data-v-48a029da><div class="adBox" data-v-48a029da><div class="item" data-v-48a029da><img src="/images/Artboard.jpg" class="adImg" data-v-48a029da> <div class="hoverShow" style="display:none" data-v-48a029da><img src="/images/ad1.jpg" data-v-48a029da></div></div></div> <!----> <ul class="sidebar-links" data-v-48a029da><li data-v-48a029da><section class="sidebar-group depth-0" data-v-48a029da><p class="sidebar-heading open"><span>从 Router 1.x 迁移</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2/migrate/migrate.html#faq" class="sidebar-link">FAQ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/v2/migrate/migrate.html#配置" class="sidebar-link">配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#routeconfig-h5-移除" class="sidebar-link">RouteConfig.h5</a></li><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#routeconfig-app-移除" class="sidebar-link">RouteConfig.APP</a></li><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#onbeforeback页面钩子-移除" class="sidebar-link">onBeforeBack页面钩子</a></li><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#routeconfig-platform-新增" class="sidebar-link">RouteConfig.platform</a></li><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#routeconfig-keepunioriginnav-新增" class="sidebar-link">RouteConfig.keepUniOriginNav</a></li><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#routeconfig-hooks-调整" class="sidebar-link">RouteConfig.hooks</a></li><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#routeconfig-detectbeforelock-新增" class="sidebar-link">RouteConfig.detectBeforeLock</a></li><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#routeconfig-resolvequery-routeconfig-parsequery-新增" class="sidebar-link">RouteConfig.resolveQuery / RouteConfig.parseQuery</a></li></ul></li><li><a href="/v2/migrate/migrate.html#注册" class="sidebar-link">注册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#路由注册" class="sidebar-link">路由注册</a></li><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#router-link-位置及名称" class="sidebar-link">router-link 位置及名称</a></li></ul></li><li><a href="/v2/migrate/migrate.html#页面生命周期" class="sidebar-link">页面生命周期</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#app-vue-生命周期的处理" class="sidebar-link">APP.vue 生命周期的处理</a></li><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#onbeforeback调整为beforerouteleave" class="sidebar-link">onBeforeBack调整为beforeRouteLeave</a></li><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#在app-vue-下获取-route" class="sidebar-link">在APP.vue 下获取 $Route</a></li></ul></li><li><a href="/v2/migrate/migrate.html#app端退出应用" class="sidebar-link">app端退出应用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#可捕捉的退出动作" class="sidebar-link">可捕捉的退出动作</a></li></ul></li><li><a href="/v2/migrate/migrate.html#app端显示首屏加载层" class="sidebar-link">app端显示首屏加载层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v2/migrate/migrate.html#等待页加载动画" class="sidebar-link">等待页加载动画</a></li></ul></li></ul></section></li></ul></div> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="从-router-1-x-迁移"><a href="#从-router-1-x-迁移" class="header-anchor">#</a> 从 Router 1.x 迁移</h1> <h2 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h2> <blockquote><p>哇，非常长的一页！是否意味着 uni-simple-router 2.0 已经完全不同了呢，是否需要从头学起呢，uni-simple-router1.0 的项目是不是没法迁移了？</p></blockquote> <p>非常开心地告诉你，并不是！几乎 95% 的 API 和核心概念都没有变。因为本节包含了很多详尽的阐述以及许多迁移的例子，所以显得有点长。不用担心，<strong>你不必从头到尾把本节读一遍！</strong></p> <h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <h3 id="routeconfig-h5-移除"><a href="#routeconfig-h5-移除" class="header-anchor">#</a> RouteConfig.h5 <span class="badge error" style="vertical-align:top;" data-v-c13ee5b0>移除</span></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    h5<span class="token operator">:</span><span class="token punctuation">{</span>
        rewriteFun<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>     <span class="token comment">//移除</span>
        loading<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>     <span class="token comment">//移除</span>
        useUniConfig<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">//移除</span>
        keepUniIntercept<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>     <span class="token comment">//移除</span>
        replaceStyle<span class="token operator">:</span><span class="token boolean">false</span>，    <span class="token comment">//移除</span>
        <span class="token function-variable function">resetStyle</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'{}'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">//移除</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>loading</code>、<code>replaceStyle</code>、<code>resetStyle</code> 移除是介于使用率过低，导致占用空间变大。如需页面加载动画可以看看<a href="https://github.com/jaweii/Vueg----page-transition-plugin" target="_blank" rel="noopener noreferrer">Vueg----page-transition-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。<code>rewriteFun</code> <strong>v2.0.0</strong> 起不干涉原本的api。<code>keepUniIntercept</code>、<code>useUniConfig</code> 已调整为默认禁用。</p> <h3 id="routeconfig-app-移除"><a href="#routeconfig-app-移除" class="header-anchor">#</a> RouteConfig.APP    <span class="badge error" style="vertical-align:top;" data-v-c13ee5b0>移除</span></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token constant">APP</span><span class="token operator">:</span><span class="token punctuation">{</span>
        switchPageOutTime<span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span>     <span class="token comment">//移除</span>
        holdTabbar<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>     <span class="token comment">//移除</span>
        <span class="token function-variable function">launchedHook</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>      <span class="token comment">//新增</span>
            plus<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span><span class="token function">closeSplashscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>移除</strong> 的选项在新版中不受影响。<strong>新增</strong> 的选项由以前的 <code>loddingPageHook</code> 函数关闭 <code>plus.navigator.closeSplashscreen();</code> 调整到 <code>launchedHook</code> 函数中。</p> <h3 id="onbeforeback页面钩子-移除"><a href="#onbeforeback页面钩子-移除" class="header-anchor">#</a> onBeforeBack页面钩子 <span class="badge error" style="vertical-align:top;" data-v-c13ee5b0>移除</span></h3> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token comment">// xxx.vue</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onBeforeBack</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">//or</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token comment">//阻止页面关闭</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="routeconfig-platform-新增"><a href="#routeconfig-platform-新增" class="header-anchor">#</a> RouteConfig.platform <span class="badge tip" style="vertical-align:top;" data-v-c13ee5b0>新增</span></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    platform<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_PLATFORM</span><span class="token punctuation">,</span>   
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>调整</strong> 运行时到编译时，由 <code>100+kb</code> 直降 <code>30kb</code>。</p> <h3 id="routeconfig-keepunioriginnav-新增"><a href="#routeconfig-keepunioriginnav-新增" class="header-anchor">#</a> RouteConfig.keepUniOriginNav <span class="badge tip" style="vertical-align:top;" data-v-c13ee5b0>新增</span></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    keepUniOriginNav<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>开启是否对 <code>uni-app</code> 原生api进行拦截。使原生api跳转能达到同插件api跳转同样的效果！<strong>不建议关闭</strong>!</p> <h3 id="routeconfig-hooks-调整"><a href="#routeconfig-hooks-调整" class="header-anchor">#</a> RouteConfig.hooks <span class="badge warning" style="vertical-align:top;" data-v-c13ee5b0>调整</span></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">routerBeforeEach</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">routerAfterEach</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">routerErrorEach</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> router</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>       <span class="token comment">//新增</span>
        <span class="token function">err</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> router<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>routerBeforeEach</code>、<code>routerAfterEach</code> 调整为管道放行，也就是说提供了<code>routerBeforeEach</code>钩子必须执行<code>next()</code> 否则后续无法跳转。<code>routerErrorEach</code>则为跳转失败，或者跳转中遇到错误进入。<strong>请注意各个钩子的参数</strong></p> <h3 id="routeconfig-detectbeforelock-新增"><a href="#routeconfig-detectbeforelock-新增" class="header-anchor">#</a> RouteConfig.detectBeforeLock <span class="badge tip" style="vertical-align:top;" data-v-c13ee5b0>新增</span></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">detectBeforeLock</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">router<span class="token punctuation">,</span> to<span class="token punctuation">,</span> navType</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//可以在这里面解锁等等</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>以前的解锁状态你可能放在 <code>routerBeforeEach</code>，现在你可以放在 <code>detectBeforeLock</code> 中精确的解锁。</p> <h3 id="routeconfig-resolvequery-routeconfig-parsequery-新增"><a href="#routeconfig-resolvequery-routeconfig-parsequery-新增" class="header-anchor">#</a> RouteConfig.resolveQuery / RouteConfig.parseQuery <span class="badge tip" style="vertical-align:top;" data-v-c13ee5b0>新增</span></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">resolveQuery</span><span class="token operator">:</span><span class="token parameter">jsonQuery</span> <span class="token operator">=&gt;</span> jsonQuery<span class="token punctuation">,</span>
    <span class="token function-variable function">parseQuery</span><span class="token operator">:</span><span class="token parameter">jsonQuery</span> <span class="token operator">=&gt;</span> jsonQuery
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>resolveQuery</code> 跳转之前把参数传递给此函数、返回最终的数据！有此函数不走默认方法。<code>parseQuery</code> 读取值之前把参数传递给此函数，返回最终的数据！有此函数不走默认方法。</p> <h2 id="注册"><a href="#注册" class="header-anchor">#</a> 注册</h2> <h3 id="路由注册"><a href="#路由注册" class="header-anchor">#</a> 路由注册</h3> <ol><li>调整以前使用new关键字到Function 构造</li></ol> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token comment">//  router/index.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>RouterMount<span class="token punctuation">,</span>createRouter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'uni-simple-router'</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     platform<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_PLATFORM</span><span class="token punctuation">,</span>
     routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">ROUTES</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>
	router<span class="token punctuation">,</span>
	RouterMount
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ol start="2"><li>新的挂载方式，传入 <code>router</code> 实例挂载。</li></ol> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token comment">//main.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>router<span class="token punctuation">,</span>RouterMount<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./router'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
App<span class="token punctuation">.</span>mpType <span class="token operator">=</span> <span class="token string">'app'</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token operator">...</span>App
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// #ifdef H5</span>
    <span class="token function">RouterMount</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span>router<span class="token punctuation">,</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
<span class="token comment">// #endif</span>

<span class="token comment">// #ifndef H5</span>
    app<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//为了兼容小程序及app端必须这样写才有效果</span>
<span class="token comment">// #endif</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ol start="3"><li><code>vue.config.js</code></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> TransformPages <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uni-read-pages'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>webpack<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransformPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	configureWebpack<span class="token operator">:</span> <span class="token punctuation">{</span>
		plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token constant">ROUTES</span><span class="token operator">:</span> webpack<span class="token punctuation">.</span>DefinePlugin<span class="token punctuation">.</span><span class="token function">runtimeValue</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token keyword">const</span> tfPages <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransformPages</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
						includes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'path'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'aliasPath'</span><span class="token punctuation">]</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>tfPages<span class="token punctuation">.</span>routes<span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="router-link-位置及名称"><a href="#router-link-位置及名称" class="header-anchor">#</a> router-link 位置及名称</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> routerLink <span class="token keyword">from</span> <span class="token string">'./node_modules/uni-simple-router/component/router-link.vue'</span>
<span class="token comment">//路径改为</span>
<span class="token keyword">import</span> Mylink <span class="token keyword">from</span> <span class="token string">'./node_modules/uni-simple-router/dist/link.vue'</span>     
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="页面生命周期"><a href="#页面生命周期" class="header-anchor">#</a> 页面生命周期</h2> <h3 id="app-vue-生命周期的处理"><a href="#app-vue-生命周期的处理" class="header-anchor">#</a> APP.vue 生命周期的处理</h3> <p>以前的 <code>onLaunch</code> 可以通过返回一个 <code>promise</code> 来处理异步，并保证<code>index.vue</code> 下的生命周期能按预期执行。<code>v2.0.0</code>起，你将调整为在全局守卫下执行。<code>onLaunch</code> 将不做异步处理！</p> <h4 id="以前的写法"><a href="#以前的写法" class="header-anchor">#</a> 以前的写法</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//app.vue </span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">onLaunch</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
		  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>  
			  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onLaunch'</span><span class="token punctuation">)</span>
              <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span>
	  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="现在的写法"><a href="#现在的写法" class="header-anchor">#</a> 现在的写法</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//app.vue </span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">onLaunch</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onLaunch'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// router.js </span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>  
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="onbeforeback调整为beforerouteleave"><a href="#onbeforeback调整为beforerouteleave" class="header-anchor">#</a> onBeforeBack调整为beforeRouteLeave</h3> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>

			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
            <span class="token comment">// 导航离开该组件的对应路由时调用</span>
            <span class="token comment">// 可以访问组件实例 `this`</span>
			<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="在app-vue-下获取-route"><a href="#在app-vue-下获取-route" class="header-anchor">#</a> 在APP.vue 下获取 $Route</h3> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">onLaunch</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'App Launch'</span><span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>$AppReady<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$Route<span class="token punctuation">)</span>	
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">onShow</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'App Show'</span><span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>$AppReady<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$Route<span class="token punctuation">)</span>	
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>为了能正确在 <code>app.vue</code> 下获取 <code>$Route</code> 属性，请按上面的写法来进行。因为在 app端 <code>app.vue</code> 下的生命周期是优先执行于页面的，也就是说页面并没有产生。这时候你需要等待页面完成才能正确获取 <code>$Route</code>属性。如果你不想使用异步写法，你也可以直接 <code>this.$Route</code> 这样写。但是如果你想同时兼容<code>小程序</code>、<code>app</code>、<code>h5</code> 请按上面的写法来进行。</p> <h2 id="app端退出应用"><a href="#app端退出应用" class="header-anchor">#</a> app端退出应用</h2> <h3 id="可捕捉的退出动作"><a href="#可捕捉的退出动作" class="header-anchor">#</a> 可捕捉的退出动作</h3> <p>退出动作对 <code>ios</code> 无影响、主要表现在安卓手机上物理返回按钮。默认是按下无动作反馈，需要自己调用退出程序。 <a href="/v2/start/app/runtimequit.html">完整请查看这里</a></p> <h2 id="app端显示首屏加载层"><a href="#app端显示首屏加载层" class="header-anchor">#</a> app端显示首屏加载层</h2> <h3 id="等待页加载动画"><a href="#等待页加载动画" class="header-anchor">#</a> 等待页加载动画</h3> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token constant">APP</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token comment">//设置等待页面背景色</span>
        <span class="token function-variable function">loddingPageStyle</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'{&quot;backgroundColor&quot;:&quot;#96DBF3&quot;}'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   
        <span class="token comment">//通过启动页生命钩子绘制加载gif</span>
        <span class="token function-variable function">loddingPageHook</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">view</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>  
            plus<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span><span class="token function">closeSplashscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            view<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            view<span class="token punctuation">.</span><span class="token function">drawBitmap</span><span class="token punctuation">(</span><span class="token string">'/static/wait.gif'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                top<span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
                left<span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
                width<span class="token operator">:</span> <span class="token string">'200px'</span><span class="token punctuation">,</span>
                height<span class="token operator">:</span> <span class="token string">'200px'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    routes<span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token comment">// ....</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>如果你不想使用 <code>uni-app</code> 启动时的加载样式，你也可以自己实现一个原生的。但是在绘制原生加载页面时请关闭掉 <code>uni-app</code> 的默认加载页面。具体关闭方法请看上面 <strong>糟色部分</strong> ！如果你没关闭 <code>uni-app</code> 默认加载页，即使你绘制了自己的加载页，它也不会显示出来。<a href="/v2/start/app/start.html">具体的请看这里</a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.623857a3.js" defer></script><script src="/assets/js/3.7d6da02e.js" defer></script><script src="/assets/js/2.867d3b73.js" defer></script><script src="/assets/js/48.2f7a751f.js" defer></script><script src="/assets/js/4.034d248d.js" defer></script>
  </body>
</html>
